'use strict';var Mermaid=require("mermaid");function _interopDefaultLegacy(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var Mermaid__default=_interopDefaultLegacy(Mermaid);
function murmurhash3_32_gc(a,d){a=(new TextEncoder).encode(a);var e=a.length&3;var f=a.length-e;var b=d;for(d=0;d<f;){var c=a[d]&255|(a[++d]&255)<<8|(a[++d]&255)<<16|(a[++d]&255)<<24;++d;c=3432918353*(c&65535)+((3432918353*(c>>>16)&65535)<<16)&4294967295;c=c<<15|c>>>17;c=461845907*(c&65535)+((461845907*(c>>>16)&65535)<<16)&4294967295;b^=c;b=b<<13|b>>>19;b=5*(b&65535)+((5*(b>>>16)&65535)<<16)&4294967295;b=(b&65535)+27492+(((b>>>16)+58964&65535)<<16)}c=0;switch(e){case 3:c^=(a[d+2]&255)<<16;case 2:c^=
(a[d+1]&255)<<8;case 1:c^=a[d]&255,c=3432918353*(c&65535)+((3432918353*(c>>>16)&65535)<<16)&4294967295,c=c<<15|c>>>17,b^=461845907*(c&65535)+((461845907*(c>>>16)&65535)<<16)&4294967295}b^=a.length;b^=b>>>16;b=2246822507*(b&65535)+((2246822507*(b>>>16)&65535)<<16)&4294967295;b^=b>>>13;b=3266489909*(b&65535)+((3266489909*(b>>>16)&65535)<<16)&4294967295;return(b^b>>>16)>>>0}
let htmlEntities=a=>String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),MermaidChart=a=>{try{var d="render"+murmurhash3_32_gc(a,42).toString();Mermaid__default["default"].mermaidAPI.render(d,a,d=>{a=d});return`<div class="mermaid">${a}</div>`}catch(e){return`<pre>${htmlEntities(e.name)}: ${htmlEntities(e.message)}</pre>`}},MermaidPlugIn=(a,d)=>{Mermaid__default["default"].initialize(Object.assign(MermaidPlugIn,d));if(!a.renderer.rules.fence)throw Error("Default markdown renderer was not found while trying to use mermaid-it!");
const e=a.renderer.rules.fence.bind(a.renderer.rules);a.renderer.rules.fence=(a,b,c,d,h)=>{const g=a[b],f=g.content.trim();return g.info.startsWith("mermaid")?MermaidChart(f):e(a,b,c,d,h)}};module.exports=MermaidPlugIn
